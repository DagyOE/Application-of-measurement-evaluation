<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="../css/bootstrap.min.css"  media="screen,projection,print"/>
    <script src="../node_modules/chart.js/dist/chart.min.js"></script>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Document</title>
</head>
<style>
    @media print
    {
      .page-break  { display:block; page-break-before:always; }

    }
</style>
<body>

    <div class="container-sm">
        <div class="row pt-4">
            <div class="col-2">
                <div class="text-center">
                    <img src="../img/logo.png" alt="logo Skoda" width="50">
                </div>
            </div>
            <div class="col-4 fs-6">
                <p>Výroba kol MQ 100/200 - PKH/3</p>
                <p>Mladá Boleslav</p>
            </div>
            <div class="col-3 fs-6 fw-bold">
                <p>Protokol o zkoušce</p>
                <p>Laborbericht Nr.</p>
            </div>
            <div class="col-3 fs-6 fw-bold">
                <p>{{ protocol_name }}</p>
            </div>
        </div>
        <!-- User info data -->
        <div class="row d-flex align-items-end">
            <div class="col">
                <div class="toast-header">
                    <i class="bi-diamond-fill text-success" style="margin-right: 5px;"></i>
                    <strong class="me-auto text-success">Vyhovuje</strong>
                    Entspricht
                </div>
            </div>
            <div class="col">
                <div class="toast-header">
                    <i class="bi-diamond-fill text-danger" style="margin-right: 5px;"></i>
                    <strong class="me-auto text-danger">Nevyhovuje</strong>
                    Entspricht nicht
                </div>
            </div>
        </div>
        <div class="row pt-2 d-flex">
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Číslo vsázky/roštu</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Charge/Rostnummer
                </figcaption>
            </div>
            <div class="col fw-bolder" title="grid">
                <p>{{ grid }}</p>
            </div>
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Číslo dávky</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Losnummer
                </figcaption>
            </div>
            <div class="col fw-bolder" title="batch">
                <p>{{ batch }}</p>
            </div>
        </div>
        <div class="row d-flex align-items-center">
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Číslo dílu</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Teilnummer
                </figcaption>
            </div>
            <div class="col fw-bolder" title="number">
                <p>{{ number }}</p>
            </div>
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Index tavby</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Schmelzeindex
                </figcaption>
            </div>
            <div class="col fw-bolder" title="melt">
                <p>{{ melt }}</p>
            </div>
        </div>
        <div class="row d-flex align-items-center">
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Materiál</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Material
                </figcaption>
            </div>
            <div class="col fw-bolder" title="material">
                <p>{{ material }}</p>
            </div>
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Počet vzorkú</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Probeteileanzahl
                </figcaption>
            </div>
            <div class="col fw-bolder" title="num">
                <p>{{ num }}</p>
            </div>
        </div>
        <div class="row d-flex align-items-center">
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Pec</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Ofen
                </figcaption>
            </div>
            <div class="col fw-bolder" title="furnance">
                <p>{{ furnance }}</p>
            </div>
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Poznámka</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Notiz
                </figcaption>
            </div>
            <div class="col fw-bolder" title="note">
                <p>{{ note }}</p>
            </div>
        </div>
        <div class="row d-flex align-items-center">
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Meno</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Name
                </figcaption>
            </div>
            <div class="col fw-bolder" title="user_name">
                <p>{{ user_name }}</p>
            </div>
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Priezvisko</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Nachname
                </figcaption>
            </div>
            <div class="col fw-bolder" title="user_surname">
                <p>{{ user_surname }}</p>
            </div>
        </div>
        <div class="row d-flex align-items-center">
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Číslo zamnestnance</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Nummer des Mitarbeiters
                </figcaption>
            </div>
            <div class="col fw-bolder" title="id">
                <p>{{ id }}</p>
            </div>
            <div class="col">
                <blockquote class="blockquote mb-0 fs-6">
                    <p>Dátum</p>
                </blockqoute>
                <figcaption class="blockquote-footer">
                    Datum
                </figcaption>
            </div>
            <div class="col fw-bolder">
                <p>{{ date }}</p>
            </div>
        </div>
    </div>

    <!-- Protocol data -->

    <div class="container-sm pt-4">
        <hr style="border-top: 1px solid #8c8b8b;">
        <div class="row page-break">
            <h3>Všechny naměřené hodnoty</h3>
            <div class="col-4">
                <!-- <div class="bg-light.bg-gradient shadow p-3 mb-5 bg-body rounded-3"> -->
                    <h5>Průměrné naměřené hodnoty</h5>
                    <table class="table table-borderless table-sm">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">X</th>
                                <th scope="col">Y</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody >
                            {% for measuring in data_ave %}
                            {% if measuring['valid'] == "OK" %}
                            <tr class="text-success">
                                <th scope="row">{{ measuring['id'] }}</th>
                                <td>{{ measuring['x'] }}</td>
                                <td>{{ measuring['y'] }}</td>
                                <td class="fw-bolder"><i class="bi-check text-success" style="margin-right: 5px;"></i></td>
                            </tr>
                            {% elif measuring['valid'] == "KO" %}
                            <tr class="text-danger">
                                <th scope="row">{{ measuring['id'] }}</th>
                                <td>{{ measuring['x'] }}</td>
                                <td>{{ measuring['y'] }}</td>
                                <td class="fw-bolder"><i class="bi-x text-danger" style="margin-right: 5px;"></i></td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                <!-- </div> -->
            </div>
            <div class="col-8">
                <!-- <div class="bg-light.bg-gradient shadow p-3 mb-5 bg-body rounded-3"> -->
                    <h6 class="p-2">Poloha průměrných hodnot</h6>
                    <canvas id="scatterChart"></canvas>
                <!-- </div> -->
            </div>
        </div>
    </div>


    <!-- Print splitter -->
    <!-- <div class="page-break"></div> -->
    <!-- Print splitter -->

    <!-- HODNOTY OSTATNE -->
    {% for measure in measuringAll %}

    <div class="container">
        
        <div class="row page-break pt-4">
            <h4 class="p-4">Výrobek #{{ measure[0] }} - Naměřené hodnoty</h4>
            <div class="col-4">
                <!-- <div class="bg-light.bg-gradient shadow p-3 mb-5 bg-body rounded-3"> -->
                    <h6 class="p-2">Tabulka naměřených hodnot</h6>
                    <table class="table table-borderless table-sm">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">X</th>
                                <th scope="col">Y</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for measuring in measure[1] %}
                            {% if measuring['valid'] == "OK" %}
                            <tr class="text-success">
                                <th scope="row">{{ measuring['id'] }}</th>
                                <td>{{ measuring['x'] }}</td>
                                <td>{{ measuring['y'] }}</td>
                                <td class="fw-bolder"><i class="bi-check text-success" style="margin-right: 5px;"></td>
                            </tr>
                            {% elif measuring['valid'] == "KO" %}
                            <tr class="text-danger">
                                <th scope="row">{{ measuring['id'] }}</th>
                                <td>{{ measuring['x'] }}</td>
                                <td>{{ measuring['y'] }}</td>
                                <td class="fw-bolder"><i class="bi-x text-danger" style="margin-right: 5px;"></td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                <!-- </div> -->
            </div>
            <div class="col-8">
                <!-- <div class="bg-light.bg-gradient shadow p-3 mb-5 bg-body rounded-3"> -->
                    <h6 class="p-2">Poloha naměřených hodnot</h6>
                    <canvas id="scatterChart{{ measure[0] }}"></canvas>
                <!-- <div> -->
            </div>
        </div>
    </div>
    {% endfor %}
    
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
</body>
<script>
    var ctx = document.getElementById("scatterChart")
    var scatterChart = new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Scatter Dataset',
                data: [{% for measuring in data_ave %} { {% if 'x' in measuring.keys() and 'y' in measuring.keys() %} x: {{ measuring['x'] }}, y: {{ measuring['y'] }} {% endif %} } ,{% endfor %}],
                backgroundColor: 'rgb(0, 128, 13)'
            }],
        },
        options: {
            scales: {
                x: [{
                    type: 'linear',
                    position: 'bottom',
                    title: {
                        display: true,
                        text: 'X axe',
                    },
                }],
                y: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Y axe',
                    },
                }]
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
</script>

{% for measure in measuringAll %}
<script>
    var ctx{{ measure[0] }} = document.getElementById("scatterChart{{ measure[0] }}")
    var scatterChart = new Chart(ctx{{ measure[0] }}, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Scatter Dataset',
                data: [{% for measuring in measure[1] %} { {% if 'x' in measuring.keys() and 'y' in measuring.keys() %} x: {{ measuring['x'] }}, y: {{ measuring['y'] }} {% endif %} } ,{% endfor %}],
                backgroundColor: 'rgb(0, 128, 13)'
            }],
        },
        options: {
            scales: {
                x: [{
                    type: 'linear',
                    position: 'bottom',
                    title: {
                        display: true,
                        text: 'X axe',
                    },
                }],
                y: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Y axe',
                    },
                }]
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
</script>
{% endfor %}


</html>